---
title: "Data Preprocessing PhD entrepreneurship in Italy"
output: html_notebook
---

A dataset with information from a survey on PhD graduates and entrepreneurship. Data source:

Muscio, Alessandro, and Laura Ramaciotti. "Dataset from a qualitative survey on Ph. D. entrepreneurship in Italy." Data in brief 18 (2018): 1272-1276. https://doi.org/10.1016/j.dib.2018.03.116

Paper saved as: 1-s2.0-S2352340918303299-main.pdf

In this notebook, the data are pre-processed for packaging in `R`.

Load libraries:
```{r}
library(haven)
library(labelled)
library(lubridate)
library(tidyverse)
```

Read data file (original is in Stata format):
```{r}
phd_italy <- read_dta("1-s2.0-S2352340918303299-mmc2.zip")
```

Get the column names and labels; these will be used in the documentation:
```{r}
data_names <- purrr::map_df(phd_italy, ~attributes(.x)) %>%
  bind_cols(names = names(phd_italy), .)
```

Remove attributes of columns, which will change after converting data to factors:
```{r}
phd_italy <- remove_attributes(phd_italy, c("label", "format.stata"))
```

Preprocess data:
```{r}
junk <- phd_italy %>%
  transmute(id = factor(id),
            q01_annodinascita,
            q02_sesso = factor(q02_sesso, 
                               levels = c(0, 1),
                               labels = c("female", "male")),
            q03_cittadinanzaest = factor(q03_cittadinanzaest,
                                         levels = c(0, 1),
                                         labels = c("Italian", "Foreign")),
            q04_provvive = factor(q04_provvive),
            q05_genitorelaureato = factor(q05_genitorelaureato,
                                          levels = c(0, 1),
                                          labels = c("No", "Yes")),
            q06_genitoreaccad  = factor(q06_genitoreaccad,
                                          levels = c(0, 1),
                                          labels = c("No", "Yes")),
            q07_genitoreimpr  = factor(q07_genitoreimpr,
                                          levels = c(0, 1),
                                          labels = c("No", "Yes")))
```

