---
title: "Session 5. A date with EDA: Bring your own data"
author:
- name: Antonio Paez
  # Enter your name here:
- name: My Name
subject: "Workshop: Exploratory Data Analysis in `R`"

# The next two sections are for your own benefit. In the highlights you can briefly reflect about your learning experience. After completing the session, use this space to write your thoughts: what did you learn working on this session? What was easy? What was challenging? How were you challenged? What did you do that worked? What would you do differently? You can use more than one paragraph but remember to indent the paragraphs. This summary does not need to be very long, try to write it in about 200 words.
highlights: |
    This is my mini-reflection. Paragraphs must be indented.
    
    It can contain multiple paragraphs.
    
# Write the concepts that in your opinion are threshold concepts in this exercise. A threshold concept is a key idea that once you grasp it, it changes your understanding of a topic, phenomenon, subject, method, etc. Write between three and five threshold concepts that apply to your learning experience working on this exercise.
threshold_concepts: 
- threshold concept 1
- threshold concept 2 
- threshold concept 3
- threshold concept 4

# Do not edit below this line unless you know what you are doing
# --------------------------------------------------------------
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  pdf_document:
    # The project-template-default.tex file was heavily  adapted from Steven V. Miller's template for academic manuscripts. See:
    # http://svmiller.com/blog/2016/02/svm-r-markdown-manuscript/
    # https://github.com/svmiller/svm-r-markdown-templates/blob/master/svm-latex-ms.tex
    template: exercise-template-default.tex
always_allow_html: true
---

# Session Outline

- Reading external data
- Hands-on practice

# Introduction

NOTE: This is an [R Markdown](http://rmarkdown.rstudio.com) document. This type of document is a plain text file that can recognize chunks of code. When you execute code within the document, the results are displayed beneath. R Markdown files are _computational notebooks_ which implement a coding philosophy called [_literate programming_](https://en.wikipedia.org/wiki/Literate_programming). Literate computing emphasizes the use of natural language to communicate with humans and chunks of code to communicate with the computer. By making the main audience other humans, this style of coding flips around the usual way in which code is written (computer is main audience, humans come second). This helps to make learning how to code more intuitive and accessible. 

# Preliminaries

It is good practice to clear the working memory in RStudio when you begin working on something new. This is to make sure that there is no extraneous info in memory that might confuse your work. The command in `R` to clear the workspace is `rm` (for 'remove'), followed by a list of items to be removed. To clear the workspace from _all_ objects, run the following chunk (by clicking on the 'play' icon):
```{r}
rm(list = ls())
```

Note that `ls()` lists all objects currently on the workspace.

An alternative way of doing this is to just click on the little broom icon in the 'Environment' tab (top right of your screen in the standard configuration of the RStudio app).

Next, we probably want to load all _packages_ that we wish to use in our work session. A package is a unit of shareable code that augments the capabilities of base `R`. Packages can be installed from different sources; the most common one is CRAN (Comprehensive R Archive Network), but sometimes from GitHub repositories, among other places where developers put their packages. A big advantage of CRAN is that it keeps track of dependencies, that is, the ways in which packages depend on one another. This reduces the probability of packages not working.

When packages are in CRAN, they can be installed using `install.packages()`. A very useful set of packages is `tidyverse`, which includes code for data manipuation and visualization. If you have not done so before, you can install the package with `install.packages("tidyverse")`. As an alternative, you can install it from RStudio using the 'Install Packages' command in the 'Tools' menu, on the menu bar above. Simply click on 'Tools - Install Packages...' on the menu bar, and enter `tidyverse` in the window. Or you can use the 'Packages' pane in the app (in the bottom right).

Once the package is part of your _library_, it becomes available for use in your computer; to use the package afterwards, you must load it into memory. For this, we use the command `library()`, which is used to load a package, that is, to activate it for use, for example:
```{r}
library(readr)
```

```{r}
external_csv <- system.file("extdata", 
                             "rankings.csv", 
                             package = "edashop")
```

```{r}
imported_csv <- read.csv(external_file)
```

```{r}
library(haven)
```

```{r}
external_dta <- system.file("extdata", 
                             "phd_italy.dta", 
                             package = "edashop")
```

```{r}
imported_dta <- read_dta(external_dta)
```

```{r}
library(readxl)
```

```{r}
external_xlsx <- system.file("extdata", 
                             "italy-nuts-codes.xlsx", 
                             package = "edashop")
```

```{r}
imported_xlsx <- read_xlsx(external_xlsx)
```

# Practice

1. Describe in your own words the concept of literate programming. What is a computational notebook?

2. Load the full version of the dataset used in the examples in this session (distributed with package [{edashop}](https://paezha.github.io/edashop/)).

```{r}
data("phd_italy_regions", 
     package = "edashop")
```

3. How many variables are there in the data frame, and what data types are they (i.e., numerical, logical, factor, etc.)?

4. Which region in Italy had the largest number of respondents to the survey? Which had the least? Can we infer from the number of respondents the population of Ph.D. students in each region? Explain.

5. Calculate the mean size of active spinoffs for every region.

6. What is the maximum mean spinoff size by region? (Hint: use `?max` to see how to deal with the `NaN` value)

7. Calculate the regional spinoff intensity started by Ph.D. students: this is number of currently active spinoffs founded by Ph.D. students in the sample.

8. What is the total number of spinoff companies in Northern, Central, and Southern Italy? (Hint: check the variable `geo` in the data frame)
